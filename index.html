<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PL Top 6 Predictor 2025/26</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Barlow+Condensed:wght@400;600;700;900&family=Barlow:wght@400;500;600;700&display=swap');

  :root {
    --pl-purple: #3d0066;
    --pl-pink: #e90052;
    --dark: #0d0d1a;
    --card: #141428;
    --card2: #1a1a35;
    --border: rgba(255,255,255,0.07);
    --text: #e8e8f0;
    --muted: rgba(255,255,255,0.4);
    --gold: #ffd700;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }
  body { background: var(--dark); color: var(--text); font-family: 'Barlow', sans-serif; min-height: 100vh; overflow-x: hidden; }

  /* HEADER */
  .header {
    background: linear-gradient(135deg, #2a0050 0%, var(--pl-pink) 100%);
    padding: 16px 20px 0;
    position: sticky; top: 0; z-index: 200;
    box-shadow: 0 4px 40px rgba(233,0,82,0.35);
  }
  .header-top { display: flex; align-items: center; gap: 14px; max-width: 860px; margin: 0 auto 10px; }
  .header-logo { font-size: 34px; line-height: 1; }
  .header-title { font-family: 'Barlow Condensed', sans-serif; }
  .header-title h1 { font-size: 22px; font-weight: 900; letter-spacing: 2px; text-transform: uppercase; line-height: 1; }
  .header-title p { font-size: 11px; opacity: 0.65; letter-spacing: 1px; margin-top: 3px; }
  .header-counter { margin-left: auto; text-align: center; background: rgba(0,0,0,0.25); border-radius: 20px; padding: 6px 14px; }
  .header-counter .num { font-family: 'Barlow Condensed', sans-serif; font-size: 20px; font-weight: 900; line-height: 1; }
  .header-counter .lbl { font-size: 9px; opacity: 0.55; letter-spacing: 1px; text-transform: uppercase; }
  .progress-wrap { max-width: 860px; margin: 0 auto 12px; }
  .progress-bar { height: 3px; background: rgba(255,255,255,0.15); overflow: hidden; border-radius: 2px; }
  .progress-fill { height: 100%; background: #fff; transition: width 0.4s ease; border-radius: 2px; }
  .tabs { display: flex; gap: 4px; max-width: 860px; margin: 0 auto; }
  .tab { padding: 10px 22px; font-family: 'Barlow Condensed', sans-serif; font-size: 14px; font-weight: 700; letter-spacing: 1px; text-transform: uppercase; border: none; cursor: pointer; border-radius: 8px 8px 0 0; transition: all 0.2s; background: transparent; color: rgba(255,255,255,0.6); }
  .tab.active { background: var(--dark); color: #fff; }
  .tab:hover:not(.active) { background: rgba(255,255,255,0.1); color: #fff; }

  /* MAIN */
  .main { max-width: 860px; margin: 0 auto; padding: 20px 16px 80px; }
  .section { display: none; }
  .section.active { display: block; }

  /* TOP 6 MINI BANNER */
  .top6-banner {
    display: flex; flex-wrap: wrap; gap: 8px;
    padding: 12px 14px; margin-bottom: 18px;
    background: var(--card); border: 1px solid var(--border); border-radius: 12px;
    align-items: center;
  }
  .top6-badge {
    display: flex; align-items: center; gap: 6px;
    background: rgba(255,255,255,0.05); border-radius: 20px; padding: 5px 10px 5px 5px;
    font-size: 12px; font-weight: 700;
  }
  .top6-dot { width: 8px; height: 8px; border-radius: 50%; }

  /* GAMEWEEK */
  .gw-group { margin-bottom: 26px; }
  .gw-label { display: flex; align-items: center; gap: 10px; font-family: 'Barlow Condensed', sans-serif; font-size: 11px; font-weight: 700; letter-spacing: 3px; text-transform: uppercase; color: var(--pl-pink); margin-bottom: 10px; }
  .gw-label-line { height: 1px; flex: 1; background: rgba(233,0,82,0.25); }
  .gw-count { background: rgba(233,0,82,0.12); border: 1px solid rgba(233,0,82,0.3); border-radius: 10px; padding: 1px 8px; font-size: 10px; }

  /* TOP6 vs TOP6 highlight */
  .fixture-card {
    background: var(--card); border: 1px solid var(--border);
    border-radius: 12px; padding: 12px 14px; margin-bottom: 7px;
    transition: border-color 0.2s, background 0.2s;
  }
  .fixture-card.top6v6 { border-color: rgba(255,215,0,0.2); background: rgba(255,215,0,0.03); }
  .fixture-card.filled { border-color: rgba(233,0,82,0.35); background: var(--card2); }
  .fixture-card.top6v6.filled { border-color: rgba(255,215,0,0.45); }
  .top6v6-tag { font-size: 9px; font-weight: 800; letter-spacing: 2px; text-transform: uppercase; color: var(--gold); opacity: 0.75; margin-bottom: 7px; }

  .fixture-row { display: grid; grid-template-columns: 1fr auto 1fr; align-items: center; gap: 8px; }
  .team-side { display: flex; align-items: center; gap: 9px; transition: opacity 0.25s; }
  .team-side.right { flex-direction: row-reverse; }
  .team-side.loser { opacity: 0.35; }
  .badge { width: 36px; height: 36px; border-radius: 50%; flex-shrink: 0; display: flex; align-items: center; justify-content: center; font-family: 'Barlow Condensed', sans-serif; font-size: 10px; font-weight: 900; color: #fff; text-shadow: 0 1px 3px rgba(0,0,0,0.6); box-shadow: 0 2px 8px rgba(0,0,0,0.3); }
  .team-name { font-size: 13px; font-weight: 700; line-height: 1.25; transition: color 0.2s; }
  .team-name.winner { color: var(--gold); }
  .team-sub { font-size: 9px; opacity: 0.45; text-transform: uppercase; letter-spacing: 1px; margin-top: 1px; }
  .team-side.right .team-info { text-align: right; }

  .score-box { display: flex; align-items: center; gap: 5px; background: rgba(0,0,0,0.35); border-radius: 10px; padding: 7px 10px; }
  .score-sep { font-size: 18px; font-weight: 900; color: rgba(255,255,255,0.2); user-select: none; }
  .score-input { width: 42px; height: 42px; background: rgba(255,255,255,0.06); border: 2px solid rgba(255,255,255,0.12); border-radius: 8px; color: #fff; font-size: 20px; font-weight: 900; text-align: center; outline: none; transition: all 0.2s; font-family: 'Barlow Condensed', sans-serif; -moz-appearance: textfield; }
  .score-input::-webkit-inner-spin-button, .score-input::-webkit-outer-spin-button { -webkit-appearance: none; }
  .score-input:focus { border-color: var(--pl-pink); background: rgba(233,0,82,0.08); }
  .score-input.winner-inp { border-color: var(--gold); color: var(--gold); background: rgba(255,215,0,0.08); }

  .result-pill { text-align: center; margin-top: 7px; font-family: 'Barlow Condensed', sans-serif; font-size: 12px; font-weight: 700; letter-spacing: 2px; text-transform: uppercase; padding: 3px 0; opacity: 0; transition: opacity 0.3s; }
  .result-pill.show { opacity: 1; }
  .result-pill.home-win { color: #22c55e; }
  .result-pill.away-win { color: #f97316; }
  .result-pill.draw { color: #60a5fa; }

  /* TABLE */
  .table-wrap { overflow-x: auto; -webkit-overflow-scrolling: touch; }
  .pl-table { width: 100%; border-collapse: collapse; min-width: 520px; }
  .pl-table thead th { font-family: 'Barlow Condensed', sans-serif; font-size: 11px; font-weight: 700; letter-spacing: 1.5px; text-transform: uppercase; color: var(--muted); padding: 8px 12px; text-align: center; white-space: nowrap; border-bottom: 1px solid var(--border); }
  .pl-table thead th.left { text-align: left; }
  .pl-table tbody tr { border-bottom: 1px solid var(--border); transition: background 0.15s; }
  .pl-table tbody tr:hover { background: rgba(255,255,255,0.03); }
  .pl-table tbody td { padding: 14px 12px; text-align: center; font-size: 13px; white-space: nowrap; }
  .pl-table tbody td.left { text-align: left; }

  .rank-cell { font-family: 'Barlow Condensed', sans-serif; font-size: 16px; font-weight: 700; width: 32px; }
  .zone-cell { width: 10px; }
  .zone-dot { width: 7px; height: 7px; border-radius: 50%; margin: auto; }

  .team-cell { display: flex; align-items: center; gap: 10px; min-width: 160px; }
  .team-cell .badge { width: 32px; height: 32px; font-size: 10px; }
  .team-cell-name { font-weight: 700; font-size: 14px; }
  .movement { font-size: 10px; font-weight: 700; display: block; margin-top: 1px; }
  .movement.up { color: #22c55e; }
  .movement.down { color: #ef4444; }
  .movement.same { color: var(--muted); }

  .pts-cell { font-family: 'Barlow Condensed', sans-serif; font-size: 22px; font-weight: 900; min-width: 52px; }
  .pts-cell.changed { color: var(--gold); }
  .extra-cell { font-size: 13px; font-weight: 700; color: #22c55e; }

  /* Row backgrounds */
  .row-1 { background: rgba(255,215,0,0.06); }
  .row-2 { background: rgba(255,215,0,0.03); }
  .row-ucl { background: rgba(34,197,94,0.1); }
  .row-uel { background: rgba(59,130,246,0.1); }
  .row-other { background: transparent; }

  /* Stats */
  .stats-bar { display: grid; grid-template-columns: repeat(3,1fr); gap: 10px; margin-bottom: 20px; }
  .stat-card { background: var(--card); border: 1px solid var(--border); border-radius: 12px; padding: 14px; text-align: center; }
  .stat-card .val { font-family: 'Barlow Condensed', sans-serif; font-size: 30px; font-weight: 900; line-height: 1; color: var(--pl-pink); }
  .stat-card .lbl { font-size: 10px; opacity: 0.5; text-transform: uppercase; letter-spacing: 1px; margin-top: 4px; }

  /* Champion label */
  .champ-label { font-size: 10px; background: var(--gold); color: #111; border-radius: 4px; padding: 1px 5px; font-weight: 800; letter-spacing: 1px; margin-left: 6px; vertical-align: middle; }

  ::-webkit-scrollbar { width: 4px; height: 4px; }
  ::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.15); border-radius: 3px; }
</style>
</head>
<body>

<div class="header">
  <div class="header-top">
    <div class="header-logo">üèÜ</div>
    <div class="header-title">
      <h1>Top 6 Race</h1>
      <p id="subtitle">2025/26 Premier League ¬∑ 0 fixtures predicted</p>
    </div>
    <div class="header-counter">
      <div class="num" id="counter">0</div>
      <div class="lbl">filled</div>
    </div>
  </div>
  <div class="progress-wrap">
    <div class="progress-bar"><div class="progress-fill" id="progress" style="width:0%"></div></div>
  </div>
  <div class="tabs">
    <button class="tab active" onclick="showTab('fixtures',this)">üìã Fixtures</button>
    <button class="tab" onclick="showTab('table',this)">üèÜ Table</button>
  </div>
</div>

<div class="main">

  <!-- FIXTURES -->
  <div class="section active" id="tab-fixtures">

    <div class="top6-banner">
      <span style="font-size:11px;font-weight:700;opacity:0.5;margin-right:4px;text-transform:uppercase;letter-spacing:1px;">Tracking:</span>
      <div class="top6-badge"><div class="top6-dot" style="background:#EF0107"></div>Arsenal</div>
      <div class="top6-badge"><div class="top6-dot" style="background:#6CABDD"></div>Man City</div>
      <div class="top6-badge"><div class="top6-dot" style="background:#95BFE5"></div>Aston Villa</div>
      <div class="top6-badge"><div class="top6-dot" style="background:#DA020E"></div>Man United</div>
      <div class="top6-badge"><div class="top6-dot" style="background:#034694"></div>Chelsea</div>
      <div class="top6-badge"><div class="top6-dot" style="background:#C8102E"></div>Liverpool</div>
    </div>

    <div id="fixtures-container"></div>
  </div>

  <!-- TABLE -->
  <div class="section" id="tab-table">

    <div class="stats-bar">
      <div class="stat-card">
        <div class="val" id="stat-filled">0</div>
        <div class="lbl">Predicted</div>
      </div>
      <div class="stat-card">
        <div class="val" id="stat-goals">0</div>
        <div class="lbl">Goals</div>
      </div>
      <div class="stat-card">
        <div class="val" id="stat-remaining">‚Äî</div>
        <div class="lbl">Remaining</div>
      </div>
    </div>

    <div class="table-wrap">
      <table class="pl-table">
        <thead>
          <tr>
            <th></th>
            <th></th>
            <th class="left">Team</th>
            <th>W</th>
            <th>D</th>
            <th>L</th>
            <th>Cur Pts</th>
            <th>+ Pts</th>
            <th>Pred Pts</th>
          </tr>
        </thead>
        <tbody id="table-body"></tbody>
      </table>
    </div>

    <div style="margin-top:14px;padding:12px 14px;background:var(--card);border:1px solid var(--border);border-radius:10px;font-size:11px;opacity:0.55;line-height:1.6;">
      ‚ö†Ô∏è Points shown include only results from fixtures listed here (games involving top 6 sides). Results against teams outside the top 6 are not predicted.
    </div>
  </div>

</div>

<script>
const TOP6 = ['ARS','MCI','AVL','MUN','CFC','LFC'];

const TEAMS = {
  ARS:{name:"Arsenal",      col:"#EF0107"},
  MCI:{name:"Man City",     col:"#6CABDD"},
  AVL:{name:"Aston Villa",  col:"#95BFE5"},
  MUN:{name:"Man United",   col:"#DA020E"},
  CFC:{name:"Chelsea",      col:"#034694"},
  LFC:{name:"Liverpool",    col:"#C8102E"},
  BRE:{name:"Brentford",    col:"#E30613"},
  BOU:{name:"Bournemouth",  col:"#DA291C"},
  EVE:{name:"Everton",      col:"#003399"},
  FUL:{name:"Fulham",       col:"#CC0000"},
  NEW:{name:"Newcastle",    col:"#241F20"},
  SUN:{name:"Sunderland",   col:"#EB172B"},
  CRY:{name:"Crystal Palace",col:"#1B458F"},
  BRI:{name:"Brighton",     col:"#0057B8"},
  LEE:{name:"Leeds United", col:"#FFCD00"},
  TOT:{name:"Spurs",        col:"#132257"},
  NFO:{name:"Nott'm Forest",col:"#DD0000"},
  WHU:{name:"West Ham",     col:"#7A263A"},
  BUR:{name:"Burnley",      col:"#6C1D45"},
  WOL:{name:"Wolves",       col:"#FDB913"},
};

const STANDINGS_TOP6 = [
  {abbr:"ARS", w:18, d:7,  l:3,  pts:61},
  {abbr:"MCI", w:17, d:5,  l:5,  pts:56},
  {abbr:"AVL", w:15, d:6,  l:6,  pts:51},
  {abbr:"MUN", w:13, d:9,  l:5,  pts:48},
  {abbr:"CFC", w:12, d:9,  l:6,  pts:45},
  {abbr:"LFC", w:13, d:6,  l:8,  pts:45},
];

// All 100 remaining fixtures ‚Äì filtered to those involving at least one top 6 team
const ALL_FIXTURES = [
  // GW29
  {id:1,  gw:"GW29", dates:"27 Feb ‚Äì 1 Mar", home:"WOL", away:"AVL"},
  {id:2,  gw:"GW29", dates:"27 Feb ‚Äì 1 Mar", home:"BOU", away:"SUN"},
  {id:3,  gw:"GW29", dates:"27 Feb ‚Äì 1 Mar", home:"ARS", away:"CFC"},
  {id:4,  gw:"GW29", dates:"27 Feb ‚Äì 1 Mar", home:"BRI", away:"NFO"},
  {id:5,  gw:"GW29", dates:"27 Feb ‚Äì 1 Mar", home:"BUR", away:"BRE"},
  {id:6,  gw:"GW29", dates:"27 Feb ‚Äì 1 Mar", home:"FUL", away:"TOT"},
  {id:7,  gw:"GW29", dates:"27 Feb ‚Äì 1 Mar", home:"LEE", away:"MCI"},
  {id:8,  gw:"GW29", dates:"27 Feb ‚Äì 1 Mar", home:"LFC", away:"WHU"},
  {id:9,  gw:"GW29", dates:"27 Feb ‚Äì 1 Mar", home:"MUN", away:"CRY"},
  {id:10, gw:"GW29", dates:"27 Feb ‚Äì 1 Mar", home:"NEW", away:"EVE"},
  // GW30
  {id:11, gw:"GW30", dates:"4 Mar", home:"BOU", away:"BRE"},
  {id:12, gw:"GW30", dates:"4 Mar", home:"AVL", away:"CFC"},
  {id:13, gw:"GW30", dates:"4 Mar", home:"BRI", away:"ARS"},
  {id:14, gw:"GW30", dates:"4 Mar", home:"EVE", away:"BUR"},
  {id:15, gw:"GW30", dates:"4 Mar", home:"FUL", away:"WHU"},
  {id:16, gw:"GW30", dates:"4 Mar", home:"LEE", away:"SUN"},
  {id:17, gw:"GW30", dates:"4 Mar", home:"MCI", away:"NFO"},
  {id:18, gw:"GW30", dates:"4 Mar", home:"NEW", away:"MUN"},
  {id:19, gw:"GW30", dates:"4 Mar", home:"TOT", away:"CRY"},
  {id:20, gw:"GW30", dates:"4 Mar", home:"WOL", away:"LFC"},
  // GW31
  {id:21, gw:"GW31", dates:"14 Mar", home:"ARS", away:"EVE"},
  {id:22, gw:"GW31", dates:"14 Mar", home:"BRE", away:"WOL"},
  {id:23, gw:"GW31", dates:"14 Mar", home:"BUR", away:"BOU"},
  {id:24, gw:"GW31", dates:"14 Mar", home:"CFC", away:"NEW"},
  {id:25, gw:"GW31", dates:"14 Mar", home:"CRY", away:"LEE"},
  {id:26, gw:"GW31", dates:"14 Mar", home:"LFC", away:"TOT"},
  {id:27, gw:"GW31", dates:"14 Mar", home:"MUN", away:"AVL"},
  {id:28, gw:"GW31", dates:"14 Mar", home:"NFO", away:"FUL"},
  {id:29, gw:"GW31", dates:"14 Mar", home:"SUN", away:"BRI"},
  {id:30, gw:"GW31", dates:"14 Mar", home:"WHU", away:"MCI"},
  // GW32
  {id:31, gw:"GW32", dates:"21 Mar", home:"BOU", away:"MUN"},
  {id:32, gw:"GW32", dates:"21 Mar", home:"AVL", away:"WHU"},
  {id:33, gw:"GW32", dates:"21 Mar", home:"BRI", away:"LFC"},
  {id:34, gw:"GW32", dates:"21 Mar", home:"EVE", away:"CFC"},
  {id:35, gw:"GW32", dates:"21 Mar", home:"FUL", away:"BUR"},
  {id:36, gw:"GW32", dates:"21 Mar", home:"LEE", away:"BRE"},
  {id:37, gw:"GW32", dates:"21 Mar", home:"MCI", away:"CRY"},
  {id:38, gw:"GW32", dates:"21 Mar", home:"NEW", away:"SUN"},
  {id:39, gw:"GW32", dates:"21 Mar", home:"TOT", away:"NFO"},
  {id:40, gw:"GW32", dates:"21 Mar", home:"WOL", away:"ARS"},
  // GW33
  {id:41, gw:"GW33", dates:"11 Apr", home:"ARS", away:"BOU"},
  {id:42, gw:"GW33", dates:"11 Apr", home:"BRE", away:"EVE"},
  {id:43, gw:"GW33", dates:"11 Apr", home:"BUR", away:"BRI"},
  {id:44, gw:"GW33", dates:"11 Apr", home:"CFC", away:"MCI"},
  {id:45, gw:"GW33", dates:"11 Apr", home:"CRY", away:"NEW"},
  {id:46, gw:"GW33", dates:"11 Apr", home:"LFC", away:"FUL"},
  {id:47, gw:"GW33", dates:"11 Apr", home:"MUN", away:"LEE"},
  {id:48, gw:"GW33", dates:"11 Apr", home:"NFO", away:"AVL"},
  {id:49, gw:"GW33", dates:"11 Apr", home:"SUN", away:"TOT"},
  {id:50, gw:"GW33", dates:"11 Apr", home:"WHU", away:"WOL"},
  // GW34
  {id:51, gw:"GW34", dates:"18 Apr", home:"AVL", away:"SUN"},
  {id:52, gw:"GW34", dates:"18 Apr", home:"BRE", away:"FUL"},
  {id:53, gw:"GW34", dates:"18 Apr", home:"CFC", away:"MUN"},
  {id:54, gw:"GW34", dates:"18 Apr", home:"CRY", away:"WHU"},
  {id:55, gw:"GW34", dates:"18 Apr", home:"EVE", away:"LFC"},
  {id:56, gw:"GW34", dates:"18 Apr", home:"LEE", away:"WOL"},
  {id:57, gw:"GW34", dates:"18 Apr", home:"MCI", away:"ARS"},
  {id:58, gw:"GW34", dates:"18 Apr", home:"NEW", away:"BOU"},
  {id:59, gw:"GW34", dates:"18 Apr", home:"NFO", away:"BUR"},
  {id:60, gw:"GW34", dates:"18 Apr", home:"TOT", away:"BRI"},
  // GW35
  {id:61, gw:"GW35", dates:"25 Apr", home:"BOU", away:"LEE"},
  {id:62, gw:"GW35", dates:"25 Apr", home:"ARS", away:"NEW"},
  {id:63, gw:"GW35", dates:"25 Apr", home:"BRI", away:"CFC"},
  {id:64, gw:"GW35", dates:"25 Apr", home:"BUR", away:"MCI"},
  {id:65, gw:"GW35", dates:"25 Apr", home:"FUL", away:"AVL"},
  {id:66, gw:"GW35", dates:"25 Apr", home:"LFC", away:"CRY"},
  {id:67, gw:"GW35", dates:"25 Apr", home:"MUN", away:"BRE"},
  {id:68, gw:"GW35", dates:"25 Apr", home:"SUN", away:"NFO"},
  {id:69, gw:"GW35", dates:"25 Apr", home:"WHU", away:"EVE"},
  {id:70, gw:"GW35", dates:"25 Apr", home:"WOL", away:"TOT"},
  // GW36
  {id:71, gw:"GW36", dates:"2 May", home:"BOU", away:"CRY"},
  {id:72, gw:"GW36", dates:"2 May", home:"ARS", away:"FUL"},
  {id:73, gw:"GW36", dates:"2 May", home:"AVL", away:"TOT"},
  {id:74, gw:"GW36", dates:"2 May", home:"BRE", away:"WHU"},
  {id:75, gw:"GW36", dates:"2 May", home:"CFC", away:"NFO"},
  {id:76, gw:"GW36", dates:"2 May", home:"EVE", away:"MCI"},
  {id:77, gw:"GW36", dates:"2 May", home:"LEE", away:"BUR"},
  {id:78, gw:"GW36", dates:"2 May", home:"MUN", away:"LFC"},
  {id:79, gw:"GW36", dates:"2 May", home:"NEW", away:"BRI"},
  {id:80, gw:"GW36", dates:"2 May", home:"WOL", away:"SUN"},
  // GW37
  {id:81, gw:"GW37", dates:"9 May", home:"BRI", away:"WOL"},
  {id:82, gw:"GW37", dates:"9 May", home:"BUR", away:"AVL"},
  {id:83, gw:"GW37", dates:"9 May", home:"CRY", away:"EVE"},
  {id:84, gw:"GW37", dates:"9 May", home:"FUL", away:"BOU"},
  {id:85, gw:"GW37", dates:"9 May", home:"LFC", away:"CFC"},
  {id:86, gw:"GW37", dates:"9 May", home:"MCI", away:"BRE"},
  {id:87, gw:"GW37", dates:"9 May", home:"NFO", away:"NEW"},
  {id:88, gw:"GW37", dates:"9 May", home:"SUN", away:"MUN"},
  {id:89, gw:"GW37", dates:"9 May", home:"TOT", away:"LEE"},
  {id:90, gw:"GW37", dates:"9 May", home:"WHU", away:"ARS"},
  // GW38
  {id:91,  gw:"GW38 ‚Äì Final Day", dates:"24 May", home:"BRI", away:"MUN"},
  {id:92,  gw:"GW38 ‚Äì Final Day", dates:"24 May", home:"BUR", away:"WOL"},
  {id:93,  gw:"GW38 ‚Äì Final Day", dates:"24 May", home:"CRY", away:"ARS"},
  {id:94,  gw:"GW38 ‚Äì Final Day", dates:"24 May", home:"FUL", away:"NEW"},
  {id:95,  gw:"GW38 ‚Äì Final Day", dates:"24 May", home:"LFC", away:"BRE"},
  {id:96,  gw:"GW38 ‚Äì Final Day", dates:"24 May", home:"MCI", away:"AVL"},
  {id:97,  gw:"GW38 ‚Äì Final Day", dates:"24 May", home:"NFO", away:"BOU"},
  {id:98,  gw:"GW38 ‚Äì Final Day", dates:"24 May", home:"SUN", away:"CFC"},
  {id:99,  gw:"GW38 ‚Äì Final Day", dates:"24 May", home:"TOT", away:"EVE"},
  {id:100, gw:"GW38 ‚Äì Final Day", dates:"24 May", home:"WHU", away:"LEE"},
];

// Filter: at least one top 6 team
const FIXTURES = ALL_FIXTURES.filter(f => TOP6.includes(f.home) || TOP6.includes(f.away));
const TOTAL = FIXTURES.length;

const scores = {};

function badge(abbr, size=36) {
  const t = TEAMS[abbr];
  const col = t ? t.col : '#888';
  const r=parseInt(col.slice(1,3),16), g=parseInt(col.slice(3,5),16), b=parseInt(col.slice(5,7),16);
  const bright = r*0.299 + g*0.587 + b*0.114;
  const tc = (abbr==='LEE'||bright>130) ? '#111' : '#fff';
  const d = document.createElement('div');
  d.className = 'badge';
  d.style.cssText = `width:${size}px;height:${size}px;background:radial-gradient(circle at 35% 35%,${col}ee,${col}88);border:2px solid ${col};font-size:${Math.round(size*0.26)}px;color:${tc};`;
  d.textContent = abbr;
  return d;
}

function buildFixtures() {
  const container = document.getElementById('fixtures-container');
  container.innerHTML = '';

  // Group by GW
  const gwMap = {};
  FIXTURES.forEach(f => {
    if (!gwMap[f.gw]) gwMap[f.gw] = {dates:f.dates, fixtures:[]};
    gwMap[f.gw].fixtures.push(f);
  });

  Object.entries(gwMap).forEach(([gwLabel, {dates, fixtures}]) => {
    const grp = document.createElement('div');
    grp.className = 'gw-group';

    const lbl = document.createElement('div');
    lbl.className = 'gw-label';
    lbl.innerHTML = `<span>${gwLabel} <span style="opacity:.5;font-size:10px;">¬∑ ${dates}</span></span><div class="gw-label-line"></div><span class="gw-count">${fixtures.length} games</span>`;
    grp.appendChild(lbl);

    fixtures.forEach(f => grp.appendChild(buildCard(f)));
    container.appendChild(grp);
  });
}

function buildCard(f) {
  const isTop6v6 = TOP6.includes(f.home) && TOP6.includes(f.away);
  const card = document.createElement('div');
  card.className = `fixture-card${isTop6v6 ? ' top6v6' : ''}`;
  card.id = `card-${f.id}`;

  if (isTop6v6) {
    const tag = document.createElement('div');
    tag.className = 'top6v6-tag';
    tag.textContent = '‚≠ê Top 6 Clash';
    card.appendChild(tag);
  }

  const row = document.createElement('div');
  row.className = 'fixture-row';

  // Home
  const homeDiv = document.createElement('div');
  homeDiv.className = 'team-side';
  homeDiv.id = `side-h-${f.id}`;
  const hInfo = document.createElement('div');
  hInfo.innerHTML = `<div class="team-name" id="tname-h-${f.id}">${TEAMS[f.home]?.name||f.home}</div><div class="team-sub">Home</div>`;
  homeDiv.appendChild(badge(f.home));
  homeDiv.appendChild(hInfo);

  // Scores
  const scoreDiv = document.createElement('div');
  scoreDiv.className = 'score-box';
  const hInp = document.createElement('input');
  hInp.type='number'; hInp.min=0; hInp.max=20; hInp.placeholder='‚Äì';
  hInp.className='score-input'; hInp.id=`inp-h-${f.id}`;
  const sep = document.createElement('span');
  sep.className='score-sep'; sep.textContent='‚Äî';
  const aInp = document.createElement('input');
  aInp.type='number'; aInp.min=0; aInp.max=20; aInp.placeholder='‚Äì';
  aInp.className='score-input'; aInp.id=`inp-a-${f.id}`;
  scoreDiv.appendChild(hInp); scoreDiv.appendChild(sep); scoreDiv.appendChild(aInp);

  // Away
  const awayDiv = document.createElement('div');
  awayDiv.className = 'team-side right';
  awayDiv.id = `side-a-${f.id}`;
  const aInfo = document.createElement('div');
  aInfo.style.textAlign='right';
  aInfo.innerHTML = `<div class="team-name" id="tname-a-${f.id}" style="text-align:right">${TEAMS[f.away]?.name||f.away}</div><div class="team-sub" style="text-align:right">Away</div>`;
  awayDiv.appendChild(aInfo);
  awayDiv.appendChild(badge(f.away));

  row.appendChild(homeDiv); row.appendChild(scoreDiv); row.appendChild(awayDiv);
  card.appendChild(row);

  const pill = document.createElement('div');
  pill.className='result-pill'; pill.id=`pill-${f.id}`;
  card.appendChild(pill);

  function update() {
    const hv = hInp.value.trim(), av = aInp.value.trim();
    scores[`${f.id}_h`] = hv; scores[`${f.id}_a`] = av;
    const filled = hv !== '' && av !== '';
    card.classList.toggle('filled', filled);
    if (filled) {
      const h = parseInt(hv), a = parseInt(av);
      const res = h > a ? 'home' : a > h ? 'away' : 'draw';
      hInp.classList.toggle('winner-inp', res==='home');
      aInp.classList.toggle('winner-inp', res==='away');
      document.getElementById(`tname-h-${f.id}`).classList.toggle('winner', res==='home');
      document.getElementById(`tname-a-${f.id}`).classList.toggle('winner', res==='away');
      homeDiv.classList.toggle('loser', res==='away');
      awayDiv.classList.toggle('loser', res==='home');
      const p = document.getElementById(`pill-${f.id}`);
      p.className = `result-pill show ${res==='draw'?'draw':res==='home'?'home-win':'away-win'}`;
      p.textContent = res==='draw' ? 'DRAW' : res==='home' ? `${f.home} WIN` : `${f.away} WIN`;
    } else {
      hInp.classList.remove('winner-inp'); aInp.classList.remove('winner-inp');
      document.getElementById(`tname-h-${f.id}`).classList.remove('winner');
      document.getElementById(`tname-a-${f.id}`).classList.remove('winner');
      homeDiv.classList.remove('loser'); awayDiv.classList.remove('loser');
      document.getElementById(`pill-${f.id}`).className='result-pill';
    }
    updateUI();
  }
  hInp.addEventListener('input', update);
  aInp.addEventListener('input', update);
  return card;
}

function computeTable() {
  let totalFilled = 0, totalGoals = 0;
  const extra = {};
  TOP6.forEach(a => { extra[a] = {pts:0,w:0,d:0,l:0}; });

  FIXTURES.forEach(f => {
    const hv = scores[`${f.id}_h`], av = scores[`${f.id}_a`];
    if (hv==='' || hv===undefined || av==='' || av===undefined) return;
    const h = parseInt(hv), a = parseInt(av);
    if (isNaN(h)||isNaN(a)) return;
    totalFilled++; totalGoals += h+a;
    // Only credit top6 teams
    if (TOP6.includes(f.home)) {
      if (h>a) { extra[f.home].pts+=3; extra[f.home].w++; }
      else if (h===a) { extra[f.home].pts+=1; extra[f.home].d++; }
      else extra[f.home].l++;
    }
    if (TOP6.includes(f.away)) {
      if (a>h) { extra[f.away].pts+=3; extra[f.away].w++; }
      else if (a===h) { extra[f.away].pts+=1; extra[f.away].d++; }
      else extra[f.away].l++;
    }
  });

  const table = STANDINGS_TOP6.map(t => ({
    ...t,
    name: TEAMS[t.abbr].name,
    predPts: t.pts + extra[t.abbr].pts,
    predW: t.w + extra[t.abbr].w,
    predD: t.d + extra[t.abbr].d,
    predL: t.l + extra[t.abbr].l,
    extraPts: extra[t.abbr].pts,
    origRank: STANDINGS_TOP6.findIndex(x=>x.abbr===t.abbr)+1,
  })).sort((a,b) => b.predPts - a.predPts || b.predW - a.predW);

  return {table, totalFilled, totalGoals};
}

function renderTable() {
  const {table, totalFilled, totalGoals} = computeTable();
  const tbody = document.getElementById('table-body');
  tbody.innerHTML = '';

  table.forEach((t, idx) => {
    const rank = idx + 1;
    const move = t.origRank - rank;

    let rowClass = '';
    let dotColor = '', dotGlow = '';
    if (rank===1)      { rowClass='row-1'; dotColor='#ffd700'; dotGlow='#ffd700'; }
    else if (rank<=4)  { rowClass='row-ucl'; dotColor='#22c55e'; dotGlow='#22c55e'; }
    else if (rank===5) { rowClass='row-uel'; dotColor='#3b82f6'; dotGlow='#3b82f6'; }
    else               { rowClass='row-other'; dotColor='#888'; dotGlow='transparent'; }

    const tr = document.createElement('tr');
    tr.className = rowClass;

    // Zone dot
    const zoneTd = document.createElement('td');
    zoneTd.className='zone-cell';
    zoneTd.innerHTML = `<div class="zone-dot" style="background:${dotColor};box-shadow:0 0 5px ${dotGlow}"></div>`;

    // Rank
    const rankTd = document.createElement('td');
    rankTd.className = 'rank-cell';
    rankTd.style.color = rank===1 ? 'var(--gold)' : rank<=4 ? '#22c55e' : rank===5 ? '#3b82f6' : 'var(--muted)';
    rankTd.textContent = rank;

    // Team
    const teamTd = document.createElement('td');
    teamTd.className='left';
    const teamCell = document.createElement('div');
    teamCell.className='team-cell';
    teamCell.appendChild(badge(t.abbr, 32));
    const nameDiv = document.createElement('div');
    let movHtml = '';
    if (move>0)       movHtml = `<span class="movement up">‚ñ≤ ${move} place${move>1?'s':''}</span>`;
    else if (move<0)  movHtml = `<span class="movement down">‚ñº ${Math.abs(move)} place${Math.abs(move)>1?'s':''}</span>`;
    else              movHtml = `<span class="movement same">No change</span>`;
    const champTag = rank===1 ? ' <span class="champ-label">TITLE</span>' : '';
    nameDiv.innerHTML = `<div class="team-cell-name">${t.name}${champTag}</div>${movHtml}`;
    teamCell.appendChild(nameDiv);
    teamTd.appendChild(teamCell);

    // W D L
    const wTd = document.createElement('td'); wTd.textContent = t.predW;
    const dTd = document.createElement('td'); dTd.textContent = t.predD;
    const lTd = document.createElement('td'); lTd.textContent = t.predL;

    // Current pts
    const curTd = document.createElement('td');
    curTd.style.cssText = 'opacity:0.45;font-size:13px;';
    curTd.textContent = t.pts;

    // Extra pts
    const extraTd = document.createElement('td');
    extraTd.className = 'extra-cell';
    extraTd.textContent = t.extraPts > 0 ? `+${t.extraPts}` : '‚Äî';

    // Predicted pts
    const ptsTd = document.createElement('td');
    ptsTd.className = `pts-cell${t.extraPts>0?' changed':''}`;
    ptsTd.textContent = t.predPts;

    tr.appendChild(zoneTd); tr.appendChild(rankTd); tr.appendChild(teamTd);
    tr.appendChild(wTd); tr.appendChild(dTd); tr.appendChild(lTd);
    tr.appendChild(curTd); tr.appendChild(extraTd); tr.appendChild(ptsTd);
    tbody.appendChild(tr);
  });
}

function updateUI() {
  const {totalFilled, totalGoals} = computeTable();
  const pct = (totalFilled / TOTAL) * 100;
  document.getElementById('counter').textContent = totalFilled;
  document.getElementById('progress').style.width = pct + '%';
  document.getElementById('subtitle').textContent = `2025/26 Premier League ¬∑ ${totalFilled}/${TOTAL} fixtures predicted`;
  document.getElementById('stat-filled').textContent = totalFilled;
  document.getElementById('stat-goals').textContent = totalGoals;
  document.getElementById('stat-remaining').textContent = TOTAL - totalFilled;
  renderTable();
}

function showTab(name, btn) {
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  document.getElementById(`tab-${name}`).classList.add('active');
  btn.classList.add('active');
  if (name==='table') renderTable();
}

buildFixtures();
renderTable();
</script>
</body>
</html>
